<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>js代码片段（1）</title>
	</head>
	<body>
		<script type="module">
			// ----------1.邮箱------------
			export const isEmail = (s) => {
				return /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(s)
			}
			
			// ------------2.严格的身份证校验------------
			export const isCardID = (sId) => {
			    if (!/(^\d{15}$)|(^\d{17}(\d|X|x)$)/.test(sId)) {
			        console.log('你输入的身份证长度或格式错误')
			        return false
			    }
			    //身份证城市
			    var aCity = { 11: "北京", 12: "天津", 13: "河北", 14: "山西", 15: "内蒙古", 21: "辽宁", 22: "吉林", 23: "黑龙江", 31: "上海", 32: "江苏", 33: "浙江", 34: "安徽", 35: "福建", 36: "江西", 37: "山东", 41: "河南", 42: "湖北", 43: "湖南", 44: "广东", 45: "广西", 46: "海南", 50: "重庆", 51: "四川", 52: "贵州", 53: "云南", 54: "西藏", 61: "陕西", 62: "甘肃", 63: "青海", 64: "宁夏", 65: "新疆", 71: "台湾", 81: "香港", 82: "澳门", 91: "国外" };
			    if (!aCity[parseInt(sId.substr(0, 2))]) {
			        console.log('你的身份证地区非法')
			        return false
			    }
			
			    // 出生日期验证
			    var sBirthday = (sId.substr(6, 4) + "-" + Number(sId.substr(10, 2)) + "-" + Number(sId.substr(12, 2))).replace(/-/g, "/"),
			        d = new Date(sBirthday)
			    if (sBirthday != (d.getFullYear() + "/" + (d.getMonth() + 1) + "/" + d.getDate())) {
			        console.log('身份证上的出生日期非法')
			        return false
			    }
			
			    // 身份证号码校验
			    var sum = 0,
			        weights = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2],
			        codes = "10X98765432"
			    for (var i = 0; i < sId.length - 1; i++) {
			        sum += sId[i] * weights[i];
			    }
			    var last = codes[sum % 11]; //计算出来的最后一位身份证号码
			    if (sId[sId.length - 1] != last) {
			        console.log('你输入的身份证号非法')
			        return false
			    }
			
			    return true
			}
			
			// ------------3.将阿拉伯数字翻译成中文的大写数字------------
			export const numberToChinese = (n) => {
				const CN = [
					{base: 0, cn: '零'}, 
					{base: 1, cn: '一'}, 
					{base: 1, cn: '二'}, 
					{base: 1, cn: '三'}, 
					{base: 1, cn: '四'}, 
					{base: 1, cn: '五'}, 
					{base: 1, cn: '六'}, 
					{base: 1, cn: '七'}, 
					{base: 1, cn: '八'}, 
					{base: 1, cn: '九'}, 
					{base: 10, cn: '十'}, 
					{base: 100, cn: '百'}, 
					{base: 1000, cn: '千'}, 
					{base: 10000, cn: '万'}, 
					{base: 100000000, cn: '亿'}, 
					{base: 10000000000000000, cn: '兆'}
				]
				
				Number.prototype.toCN = function (i = CN.length - 1, emitLeadingOne = true) {
					// 小数部分处理：
					let deciPos = String(this).indexOf('.')
					if (deciPos >= 0) {
						let decimal = String(this).substring(deciPos + 1).replace(/\d/g, d => parseInt(d).toCN())
						return `${Math.floor(this).toCN()}点${decimal}`
					}
				
					// 整数部分处理：
					if (this < 10) {
						return CN[this].cn
					}
					let a = Math.floor(this / CN[i].base)
					let b = this % CN[i].base
					let c = b.toCN(i - 1, emitLeadingOne && a == 0)
					if (a > 0) {
						let d = a.toCN()
						if (emitLeadingOne && i == 10 && a == 1) {
							d = ''
						}
						if (b > 0) {
							if (String(CN[i].base).length - String(b).length > 1) {
								return d + CN[i].cn + CN[0].cn + c
							} else {
								return d + CN[i].cn + c
							}
						} else {
							return d + CN[i].cn
						}
					} else {
						return c
					}
				}
				return n.toCN()
			}
			console.log(numberToChinese(10635683.021))
			// 一千零六十三万五千六百八十三点零二一
			
			// ------------4.将数字转换为大写金额------------
			export const changeToChinese = (n) => {
				let fraction = ['角', '分', '毫', '厘']
				let digit = [
					'零', '壹', '贰', '叁', '肆',
					'伍', '陆', '柒', '捌', '玖'
				];
				let unit = [
					['元', '万', '亿'],
					['', '拾', '佰', '仟']
				];
				let head = n < 0 ? '欠' : ''
				n = Math.abs(n)
				let s = ''
				for (let i = 0; i < fraction.length; i++) {
					s += (digit[Math.floor(Math.floor(n * 1000 * 10 * Math.pow(10, i)) % (10 * 1000) / 1000)] + fraction[i]).replace(/零./, '')
				}
				s = s || '整'
				n = Math.floor(n)
				for (let i = 0; i < unit[0].length && n > 0; i++) {
					let p = ''
					for (let j = 0; j < unit[1].length && n > 0; j++) {
						p = digit[n % 10] + unit[1][j] + p
						n = Math.floor(n / 10)
					}
					s = p.replace(/(零.)*零$/, '').replace(/^$/, '零') + unit[0][i] + s
				}
				return head + s.replace(/(零.)*零元/, '元')
					.replace(/(零.)+/g, '零')
					.replace(/^整$/, '零元整')
			}
	
			console.log(changeToChinese(0.123))
			// 壹佰贰拾叁亿肆仟伍佰陆拾壹万零陆佰伍拾陆元壹角贰分
			
			// ------------5.去除空格------------
			// type: 1-所有空格 2-前后空格 3-前空格 4-后空格
			export const trim = (str, type) => {
				type = type || 1
				switch (type) {
					case 1:
						return str.replace(/\s+/g, "");
					case 2:
						return str.replace(/(^\s*)|(\s*$)/g, "");
					case 3:
						return str.replace(/(^\s*)/g, "");
					case 4:
						return str.replace(/(\s*$)/g, "");
					default:
						return str;
				}
			}
			
			// ------------6.字符转换------------
			// type: 1:首字母大写 2：首字母小写 3：大小写转换 4：全部大写 5：全部小写
			export const changeCase = (str, type) => {
			    type = type || 4
			    switch (type) {
			        case 1:
			            return str.replace(/\b\w+\b/g, function (word) {
			                return word.substring(0, 1).toUpperCase() + word.substring(1).toLowerCase();
			
			            });
			        case 2:
			            return str.replace(/\b\w+\b/g, function (word) {
			                return word.substring(0, 1).toLowerCase() + word.substring(1).toUpperCase();
			            });
			        case 3:
			            return str.split('').map(function (word) {
			                if (/[a-z]/.test(word)) {
			                    return word.toUpperCase();
			                } else {
			                    return word.toLowerCase()
			                }
			            }).join('')
			        case 4:
			            return str.toUpperCase();
			        case 5:
			            return str.toLowerCase();
			        default:
			            return str;
			    }
			}
			
			// ------------7.检测密码强度----------------
			export const checkPwd = (str) => {
			    var Lv = 0;
			    if (str.length < 6) {
			        return Lv
			    }
			    if (/[0-9]/.test(str)) {
			        Lv++
			    }
			    if (/[a-z]/.test(str)) {
			        Lv++
			    }
			    if (/[A-Z]/.test(str)) {
			        Lv++
			    }
			    if (/[\.|-|_]/.test(str)) {
			        Lv++
			    }
			    return Lv;
			}
			console.log(checkPwd('Hy123_'))//4
		</script>
	</body>
</html>
