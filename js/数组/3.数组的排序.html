<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数组的排序</title>
</head>
<body>
    <script>
        // 一、普通数组排序
        // js中用方法sort()为数组排序。sort()方法有一个可选参数，是用来确定元素顺序的函数。
        // 如果这个参数被省略，那么数组中的元素将按照ASCII字符顺序进行排序。如：
        var arr1 = ["a", "b", "A", "B"];
        arr1.sort();
        console.log(arr1);//["A", "B", "a", "b"]
        // 因为字母A、B的ASCII值分别为65、66，而a、b的值分别为97、98，所以上面输出的结果是 ["A", "B", "a", "b"] 。

        // 如果数组元素是数字呢，结果会是怎样？
        var arr = [15, 8, 25, 3];
        arr.sort();
        console.log(arr);//[15, 25, 3, 8]
        // 其实，sort方法会调用每个数组项的toString()方法，得到字符串，然后再对得到的字符串进行排序。
        // 虽然数值15比3大，但在进行字符串比较时"15"则排在"3"前面。显然，这种结果不是我们想要的，
        // 这时，sort()方法的参数就起到了作用，我们把这个参数叫做比较函数。

        // 比较函数接收两个参数，如果第一个参数应该位于第二个之前则返回一个负数，
        // 如果两个参数相等则返回0，如果第一个参数应该位于第二个之后则返回一个正数。
        // 如果要按升序排序,例子：
        var arr2 = [23, 9, 4, 78, 3];
        var compare1 = function (x, y) {//比较函数
            if (x < y) {
                return -1;
            } else if (x > y) {
                return 1;
            } else {
                return 0;
            }
        }
        console.log(arr2.sort(compare1)); //[3, 4, 9, 23, 78]

        // 如果要按降序排序，比较函数写成这样即可：
        var compare2 = function (x, y) {
            if (x < y) {
                return 1;
            } else if (x > y) {
                return -1;
            } else {
                return 0;
            }
        }
        console.log(arr2.sort(compare2));

        // 我们并不能用比较函数比较一个不能转化为数字的字符串与数字的顺序：

        var arr3 = ["b", 5];
        console.log(arr3.sort(compare1));//["b", 5]
        // 因为比较函数在比较时，会把先把字符串转化为数字，然后再比较，字符串b不能转化为数字，
        // 所以就不能比较大小。然而，当不用比较函数时，会比较ASCII值，所以结果是 [5, "b"] 。

        // 二、数组对象排序
        // 如果数组项是对象，我们需要根据数组项的某个属性对数组进行排序，要怎么办呢？
        var arr4 = [{name: "zlw", age: 24}, {name: "wlz", age: 25}];
        var compare3 = function (obj1, obj2) {
            var val1 = obj1.name;
            var val2 = obj2.name;
            if (val1 < val2) {
                return -1;
            } else if (val1 > val2) {
                return 1;
            } else {
                return 0;
            }            
        } 
        console.log(arr4.sort(compare3));//[{ name="wlz", age=25}, Object { name="zlw", age=24}]

        // 如果想按照 age 进行排序， arr.sort(compare("age")) 即可
        var compare = function (prop) {
            return function (obj1, obj2) {
                var val1 = obj1[prop];
                var val2 = obj2[prop];
                if (!isNaN(Number(val1)) && !isNaN(Number(val2))) {
                    val1 = Number(val1);
                    val2 = Number(val2);
                }
                if (val1 < val2) {
                    return -1;
                } else if (val1 > val2) {
                    return 1;
                } else {
                    return 0;
                }            
            } 
        }


        // 三、插入排序,冒泡排序
        var canArr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 12, 14, 21, 32, 43, 45, 55, 56, 57, 67, 68, 99, 115];     
        //插入排序       
        function insert(arr){
            var s;
            // 升序
            for (var i= 1; i< arr.length; i++) {
                for (var j= i; j > 0; j--) {
                    if(arr[j] < arr[j - 1]){
                        s = arr[j];
                        arr[j] = arr[j-1];
                        arr[j-1] = s;
                        console.log(arr);//可以打印出来每一个改变的步骤 
                    }
                }               
            }

            // 降序
            for (var i = 1; i < arr.length; i++) {
                for (var j = i; j > 0; j--) {
                    if(arr[j] > arr[j - 1]){
                        s = arr[j];
                        arr[j] = arr[j-1];
                        arr[j-1] = s;
                        console.log(arr);//可以打印出来每一个改变的步骤 
                    }
                }               
            }

            return arr;
        }
        console.log("插入排序:");
        console.log(insert(canArr));
        // [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 12, 14, 21, 32, 43, 45, 55, 56, 57, 67, 68, 99, 115]


        // 冒泡排序
        function bubble(arr) { 
            var s ;
            for (var i =0;i<arr.length;i++) { 
                for (var j = 0; j < arr.length; j++) {
                    if (arr[j] < arr[j + 1]){ 
                        s = arr[j]; 
                        arr[j]=arr[j+1]; 
                        arr[j+1]=s; 
                    } 
                }
            }
            return arr;
        }
        console.log("冒泡排序:");
        
        console.log(bubble(canArr));
    </script>
</body>
</html>